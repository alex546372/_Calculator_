<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Калькулятор уравнений</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
<style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #eef2f5; padding: 20px; }
    h2 { color: #333; }
    input, button { padding: 10px; margin: 5px 0; width: 100%; font-size: 1rem; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #4CAF50; color: white; cursor: pointer; transition: 0.3s; }
    button:hover { background: #45a049; }
    #solution { background: #fff; padding: 20px; border-radius: 10px; margin-top: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);}
    .step { margin-bottom: 15px; padding: 10px; border-left: 4px solid #4CAF50; background: #f9f9f9; }
    code { background: #eee; padding: 2px 5px; border-radius: 3px; }
</style>
</head>
<body>

<h2>Калькулятор уравнений</h2>
<p>Введите квадратное, неполное или линейное уравнение:</p>
<input type="text" id="equation" placeholder="Примеры: x^2+6=0, x^2+5x=0, 3x+5=0">
<button onclick="solveEquation()">Решить</button>

<div id="solution"></div>

<script>
function parseEquation(equation) {
    equation = equation.replace(/\s+/g, '').replace('=0','');

    // Квадратное полное или неполное
    let match = equation.match(/([+-]?\d*\.?\d*)x\^2([+-]?\d*\.?\d*)x?([+-]?\d*\.?\d*)?/);
    if (match) {
        let a = match[1] === '' || match[1] === '+' ? 1 : (match[1] === '-' ? -1 : parseFloat(match[1]));
        let b = match[2] === '' || match[2] === '+' ? 0 : (match[2] === '-' ? -1 : parseFloat(match[2]));
        let c = match[3] === undefined || match[3] === '' ? 0 : parseFloat(match[3]);
        return {type: 'quadratic', a, b, c};
    }

    // Линейное
    match = equation.match(/([+-]?\d*\.?\d*)x([+-]?\d*\.?\d+)/);
    if (match) {
        let b = match[1] === '' || match[1] === '+' ? 1 : (match[1] === '-' ? -1 : parseFloat(match[1]));
        let c = parseFloat(match[2]);
        return {type: 'linear', b, c};
    }

    return null;
}

function solveEquation() {
    const eqInput = document.getElementById('equation').value;
    const solDiv = document.getElementById('solution');
    const parsed = parseEquation(eqInput);

    if (!parsed) {
        solDiv.innerHTML = '<p style="color:red;">Не удалось распознать уравнение. Попробуйте формат: x^2+bx+c=0 или bx+c=0</p>';
        return;
    }

    let steps = '';

    if (parsed.type === 'quadratic') {
        const {a, b, c} = parsed;
        steps += `<div class="step"><strong>Уравнение:</strong> ${a}x² + ${b}x + ${c} = 0</div>`;

        if (b === 0 && c === 0) {
            // x^2 = 0
            steps += `<div class="step">Уравнение: ${a}x² = 0 → x = 0</div>`;
        } else if (b === 0) {
            // ax^2 + c = 0
            steps += `<div class="step">Неполное квадратное: ${a}x² + ${c} = 0</div>`;
            const x1 = Math.sqrt(-c / a);
            const x2 = -x1;
            steps += `<div class="step">x² = ${-c}/${a} = ${-c/a}</div>`;
            if (-c / a < 0) {
                steps += `<div class="step" style="color:red;">Нет действительных корней (под корнем отрицательное число)</div>`;
            } else {
                steps += `<div class="step">x = ±√(${ -c/a }) → x₁ = ${x1}, x₂ = ${x2}</div>`;
            }
        } else if (c === 0) {
            // ax^2 + bx = 0
            steps += `<div class="step">Неполное квадратное: ${a}x² + ${b}x = 0</div>`;
            steps += `<div class="step">Вынесем x за скобку: x(${a}x + ${b}) = 0</div>`;
            const x1 = 0;
            const x2 = -b/a;
            steps += `<div class="step">x₁ = 0</div>`;
            steps += `<div class="step">x₂ = -b/a = -(${b})/${a} = ${x2}</div>`;
        } else if (a === 1) {
            // Приведенное квадратное, через Виета
            steps += `<div class="step"><strong>Приведенное уравнение (a=1), используем формулы Виета:</strong></div>`;
            steps += `<div class="step">Сумма корней: x₁ + x₂ = -b = ${-b}</div>`;
            steps += `<div class="step">Произведение корней: x₁ * x₂ = c = ${c}</div>`;
            const D = b*b - 4*a*c;
            const sqrtD = Math.sqrt(D >= 0 ? D : -D);
            const x1 = (-b + sqrtD)/(2*a);
            const x2 = (-b - sqrtD)/(2*a);
            steps += `<div class="step"><strong>Численные корни:</strong> x₁ = ${x1}, x₂ = ${x2}</div>`;
        } else {
            // Полное, через дискриминант
            const D = b*b - 4*a*c;
            steps += `<div class="step"><strong>Используем дискриминант:</strong> D = b² - 4ac = ${b}² - 4*${a}*${c} = ${D}</div>`;
            if (D < 0) {
                steps += `<div class="step" style="color:red;">Нет действительных корней (D < 0)</div>`;
            } else {
                const sqrtD = Math.sqrt(D);
                const x1 = (-b + sqrtD)/(2*a);
                const x2 = (-b - sqrtD)/(2*a);
                steps += `<div class="step">x₁ = (-${b} + √${D}) / (2*${a}) = ${x1}</div>`;
                steps += `<div class="step">x₂ = (-${b} - √${D}) / (2*${a}) = ${x2}</div>`;
            }
        }

    } else if (parsed.type === 'linear') {
        const {b, c} = parsed;
        steps += `<div class="step"><strong>Линейное уравнение:</strong> ${b}x + ${c} = 0</div>`;
        if (b !== 0) {
            const x = -c / b;
            steps += `<div class="step">x = -c/b = -(${c}) / (${b}) = ${x}</div>`;
        } else {
            if (c === 0) {
                steps += `<div class="step" style="color:green;">Бесконечно много решений</div>`;
            } else {
                steps += `<div class="step" style="color:red;">Решений нет</div>`;
            }
        }
    }

    solDiv.innerHTML = steps;
}
</script>

</body>
</html>
